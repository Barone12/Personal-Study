
# Lab02

201800473 정재욱

---

## 할일 1

- 도서자료 요약 데이터 실습은 다운로드 받은 데이터 중 하나의 디렉토리만 다루고 있다. 나머지 데이터에 대해서도 유사한 분석을 수행해 보자. 명령들을 변형 시켜 사용하여 보고 다양한 유용한 정보를 추출하여 분석하는 보고서를 작성해 보자. 

### 1.1
기술과학에서 이전 예제와 동일하게 주제별 빈도를 내림차순하는 명령어를 입력해봤다.

```bash
grep '"kdc_label":' PCY_2020* | cut -d: -f3 | sort | uniq -c | sort -nr
```


출력 결과
![[Pasted image 20241102153435.png]]
![](Pasted%20image%2020241102181239.png)
`grep` : PCY_로 시작하는 파일에서 '"kdc_label": '라는 문자열을 포함하는 행 검색
`cut` : 문자열을 ':'으로 구분하여(-d:) 3번째 필드를 선택(-f3)
`sort` : 정렬한 뒤, 파이프라인을 통해  `uniq -c`로 전달
`uniq -c`: 중복 행의 개수 센 후, 파이프라인을 통해 `sort -nr`로 전달
`sort -nr`: 숫자(-n)로 역순(-r)정렬

즉 kdc_label이 포함된 행의 세 번째 필드 값이 파일에서 얼마나 자주 나타나는지 내림차순 정렬

### 1.2
기술과학의 전체 파일들에 대해서 퍼블리셔의 빈도를 내림차순 해봤다.

```bash
 grep '"publisher":' PCY_* | cut -d: -f3 | sort | uniq -c | sort -nr
```

`grep` : PCY_로 시작하는 파일에서 '"publisher": '라는 문자열을 포함하는 행 검색
`cut` : 문자열을 ':'으로 구분하여(-d:) 3번째 필드를 선택(-f3)
`sort` : 정렬한 뒤, 파이프라인을 통해  `uniq -c`로 전달
`uniq -c`: 중복 행의 개수 센 후, 파이프라인을 통해 `sort -nr`로 전달
`sort -nr`: 숫자(-n)로 역순(-r)정렬

![[Pasted image 20241102172257.png]]

기술과학 테마이기 때문인지, publisher가 연구원인 곳이 많으며, 그 중 과학기술정책 연구원이 가장 많았다.
## 할일 2


-  hw01-task02.7z 파일에는 국립국어원 의미역 기술 모형 데이터가 들어있다. LDC의 Korean Propbank 구조에 따라 우리말샘 문형 정보를 참조하여 술어의 필수 의미역을 기술한 데이터이다. 
-  파일명을 UTF-8 NFC 형식으로 통일하고 인코딩은 UTF-8, BOM 없이, 줄바꿈은 LF로 통일하여 정비하자. 
-  이 작업은 상당히 도전적인 문제가 될 수 있다. 파일명에 공백문자가 포함되어 있다는 점에 주의하자. 여러 개의 파일을 한번에 일괄처리하는 방법을 연습해 보자.
-  작업 과정을 간략히 보고서로 작성하자. 제공된 파일의 상태가 어떤지, 어떤 명령들을 이용해 어떻게 파일들을 탐색하고 처리했는지 서술한다.

우선 줄바꿈 형식을 일괄적으로 변경한 뒤, 확인한다.

```bash
dos2unix *.xml
dos2unix -ih *.xml
```

![[Pasted image 20241102174614.png]]

전체가 BOM이 없으며, CRLF는 LF로 바뀐 모습이 확인되나 MAC(CR)방식을 LF 방식으로 통일시킬 필요가 있다.

```bash
sed -i 's/\r/\n/g' *.xml
```

`sed -i` : 텍스트 편집을 한 뒤, 원본에 저장
`s/\r/\n/g` : `s/패턴/대체할 텍스트/g` \r 줄바꿈을 \n 줄바꿈으로 대체


sed를 사용한 뒤, 모든 파일이 LF 줄바꿈으로 변경됨이 확인됐다.
![[Pasted image 20241102175554.png]]

다음은 UTF-8형식에 NFC로 정규화시킨다.


```bash
convmv -f cp949 -t utf8 --nfc --notest *.xml
```
convmv를 통해 utf8로 변환시켰을 때, 이미 utf-8임이 확인됐다.
![[Pasted image 20241102180648.png]]

```bash
convmv -f utf8 -t utf8 --nfc --notest *.xml
```

--nfc옵션을 걸어서 파일 전부 NFC로 정규화시켰다.

![[Pasted image 20241102180755.png]]

file 명령어를 통해 정상적으로 통일됐음을 알 수 있다.
```bashrc
file *.xml
```

![[Pasted image 20241102180915.png]]